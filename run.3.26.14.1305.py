import numpy as np

aips_dates = np.sort(['20001008','20001010','20001015','20001017','20001021','20001022','20001025','20001028','20001031','20001102','20001104','20001107','20001109','20001118','20001120','20001126','20001130','20001203','20001207','20001210','20001215','20001221','20001227','20001229','20010103','20010105','20010107','20010110','20010113','20010115','20010118','20010123','20010127','20010130','20010201','20010205','20010207','20010208','20010212','20010214','20010216','20010218','20010221','20010222','20010226','20010301','20010304','20010306','20010310','20010314','20010318','20010321','20010323','20010326','20010328','20010330','20010331','20010402','20010405','20010409','20010410','20010414','20010417','20010419','20010424','20010426','20010430','20010505','20010508','20010512','20010514','20010517','20010520','20010525','20010528'])

sources = ['1035+564','1244+408','1400+621','0414+573','0712+472','1030+074','1127+385','1152+199']

FILE = open('/home/rumbaugh/EVLA/light_curves/elevations_VLA_AF377.dat','w')
FILE.write('# date 1035+564 1244+408 1400+621 0414+573 0712+475 1030+382 1127+385 1152+199\n')

for i in range(0,len(aips_dates)):
    aips_date = aips_dates[i]
    day,month,year = aips_date[6:],aips_date[4:6],aips_date[:4]
    if year == '2001': month = str(int(month))
    FILE.write('%4s %2s %2s'%(year,month,day))
    cr = np.loadtxt('/mnt/data2/rumbaugh/AIPS/elevfiles/%s.ELEV'%aips_date,skiprows=12,dtype='string',usecols=(0,1,2))
    cr_src = cr[:,1]
    ant1elev = np.array(cr[:,2],dtype='int')
    for source in sources:
        gs = np.where(cr_src == source)[0]
        #if ((source == '0414+573') & (len(gs) == 0)): gs = np.where(cr_src = '0414+5734')[0]
        if len(gs) == 0:
            avgelev = 0.
        else:
            avgelev = np.mean(ant1elev[gs])
        FILE.write(' %4.1f'%avgelev)
    FILE.write('\n')
FILE.close()
